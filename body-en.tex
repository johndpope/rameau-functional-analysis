
\section{Introduction}
\label{sec:introduction}

\nota{Context}

In the past few years we have been developing Rameau, a system for
automatic harmonic analysis \cite{kroger08:rameau}. Rameau, as of the
last update, had support for many different chord-labeling algorithms,
automatic identitication of non-chordal sonorities, basic
musicological functionality (such as cadence and voice crossing
detection), Lilypond \cite{nienhuys.ea08:lilypond} integration, tonal
codification support and many other interesting properties.

\nota{Focus}

Recently, we have implemented in Rameau support for roman numeral
functional harmonic analysis. This includes adding notions of
keyfinding, tonal function detection, modulation and tonicization
detection and some other secondary features. Supporting this analysis
involves many important musicological decisions, and has some
non-trivial consequences. For example, many tonal pieces have phrases
and even movements that are non-harmonical in nature, such as some
contrapuntual passages in Brahms' no 1 quartet \nota{confirmar, citar
  direito}. Every harmonic analysis of such a passage is nonsensical,
and, if automatically performed, will probably find cadences in the
noise instead of detecting the structure of the piece. Another
important problem is how to represent, internally, a roman numeral
functional analysis. How we approached these problems will be made
clear in the remainder of this paper.

\nota{Related work}

\cite{raphael.ea03:harmonic} \cite{maxwell92:expert}
\cite{tsui02:harmonic} \cite{temperley.ea99:modeling}
\cite{taube99:automatic} \cite{winograd68:linguistics}
\cite{barthelemy.ea01:figured} \cite{ulrich77:analysis}

\nota{contributions}

In this paper we present the infrastructure and algorithms implemented
in Rameau to properly do functional harmonic analysis, and the
problems encountered on the path.

\nota{structure}

\section{The problem}
\label{sec:problem}

Roman numeral functional analysis consists, roughly, in two
activities: key finding and roman numeral function detection. This
view, on the one hand, highlight the important factors for this
specific problem but, on the other hand, ignores important sub-aspects
of harmonic analysis such as the detection of harmonically significant
segments, the disambiguation of enharmonic notes, the disambiguation
of possibly different chord types (such as telling a major chord
without a third apart from a minor chord without a third).

\subsection{Key finding}
\label{sec:key-finding}

\nota{keyfinding é algo terrivelmente ambíguo, pode ter vários níveis
  de verdade}

The concept of key, in tonal music theory, is vague and ambiguous, and
telling its many meanings apart is crucial when designing harmonic
analysis software. When speaking of key, a musician might speak of the
key of a piece, the key of a passage (a movement in a symphony, for
example, might have a different key from the main key in the
symphony), the key of a phrase, the key of a cadence, and even the key
of a single chord (for example, it might be argued that, for a
secondary dominant chord, its key might be said to be different from
the overall key of the surrounding passage). Clearly, there might be
more or less different scopes for the key of a song, and determining
in which scope (or scopes) to perform analysis. There's also the
problem of determining how correct the key an algorithm finds for a
given chord is.

\nota{como mostrar o resultado}

Another important problem involving keyfinding is the graphical
representation of a key that is shown to the user.

\subsection{Roman function detection}
\label{sec:roman-funct-detect}

\nota{funções romanas dependem muito da tonalidade encontrada}

\nota{e dependem também das notas de forma sutil}

\section{The Framework}
\label{sec:framework}


\section{Algorithms}
\label{sec:algorithms}

\subsection{Hidden Markov Model}
\label{sec:hidden-markov-model}

\subsection{KNN}
\label{sec:knn}

\subsection{Pardo \& Birmingham's}
\label{sec:pardo--birminghams}

\section{Example analyses}
\label{sec:example-analyses}

\section{Conclusions and future work}
\label{sec:concl-future-work}


%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "icmc2009"
%%% End: 
